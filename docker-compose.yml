version: '3.8'

services:
  # üêò –ù–∞—à–∞ –ë–∞–∑–∞ –î–∞–Ω–Ω—ã—Ö (PostgreSQL)
  db:
    image: postgres:16
    container_name: gigcore_db
    restart: always
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: password  # –ü–∞—Ä–æ–ª—å –∫–∞–∫ —É —Ç–µ–±—è –≤ .env
      POSTGRES_DB: gigcore
    ports:
      - "5432:5432" # –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ—Ä—Ç –Ω–∞—Ä—É–∂—É, —á—Ç–æ–±—ã —Ç—ã –º–æ–≥ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ DBeaver/–∫–æ–¥
    volumes:
      - postgres_data:/var/lib/postgresql/data # <-- –í–ê–ñ–ù–û: –¢—É—Ç —Ö—Ä–∞–Ω—è—Ç—Å—è –¥–∞–Ω–Ω—ã–µ

  # ‚ö° –ù–∞—à –ö—ç—à (Redis)
  redis:
    image: redis:7-alpine
    container_name: gigcore_redis
    restart: always
    ports:
      - "6379:6379" # –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø–æ—Ä—Ç, —á—Ç–æ–±—ã Python –º–æ–≥ –¥–æ—Å—Ç—É—á–∞—Ç—å—Å—è
    volumes:
      - redis_data:/data # –ß—Ç–æ–±—ã –∫—ç—à/–æ—á–µ—Ä–µ–¥–∏ –Ω–µ –ø—Ä–æ–ø–∞–¥–∞–ª–∏ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è: Docker –±—É–¥–µ—Ç –∑–Ω–∞—Ç—å, –∂–∏–≤ –ª–∏ Redis
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 10s
      timeout: 5s
      retries: 5

# –¢—É—Ç –º—ã –æ–±—ä—è–≤–ª—è–µ–º "—Å–∫–ª–∞–¥—ã" –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
volumes:
  postgres_data:
  redis_data: